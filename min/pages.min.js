import mixins from"./mixins.min.js";import{NTables}from"./components.min.js";export const Home={name:"home",template:"<div>\n  <button></button>\n</div>"};export const Recibos={name:"Recibos",template:'\n  <div class="container">\n    \x3c!-- TABS --\x3e\n    <q-tabs active-bg-color="primary" active-color="white" class="bg-secondary text-primary" dense indicator-color="transparent" inline-label top-indicator v-model="myRoute">\n      <q-route-tab :label="$lang.Gestion" icon="assignment_turned_in" name="gestion" to="/recibos/gestion"/>\n      <q-route-tab :label="$lang.BajasPendientes" icon="assignment_returned" name="bajas" to="/recibos/bajas"/>\n      <q-route-tab :label="$lang.Liquidacion" icon="credit_card" name="liq" to="/recibos/liq"/>\n      <q-tab :label="calculos.importe" class="text-primary" disabled icon="euro_symbol"/>\n    </q-tabs>\n    \x3c!-- SELECT FILTERS TOTALS--\x3e\n    <div>\n      <div class="row text-center">\n        <div class="col-xs-12 col-md-4" style="padding: 10px">\n          <q-input :label="$lang.FiltroRapido" dense type="text" v-model="quickFilter">\n            <q-icon name="filter_list" slot="prepend"/>\n            <q-icon @click="quickFilter = \'\'" class="cursor-pointer" name="close" slot="append"/>\n          </q-input>\n        </div>\n        \x3c!-- FILTER ONLY GESTION --\x3e\n        <template v-if="this.$route.params.recibo==\'gestion\'">\n          <div class="col-xs-12 col-md-4" style="padding: 10px">\n            <q-select :label="$lang.FiltrosDeEstado" :options="this.$lang.estados" @input="callDataGestion" dense expandBesides multiple optionsDense v-model="filter.estadosSel"/>\n          </div>\n          <div class="col-xs-6 col-md-2" style="padding: 10px">\n            <q-select :label="$lang.HistorialUsuario" :options="this.$lang.userby" @input="callDataGestion" dense expandBesides optionsDense v-model="filter.userby"/>\n          </div>\n          <div class="col-xs-6 col-md-2" style="padding: 10px">\n            <q-toggle :label="$lang.TodosLosRegistros" @input="callDataGestion" dense v-model="filter.alldata">\n              <q-tooltip anchor="top middle" self="bottom middle">{{$lang.TodosLosRegistrosT}}</q-tooltip>\n            </q-toggle>\n          </div>\n        </template>\n        \x3c!-- FILTER ONLY BAJAS --\x3e\n        <template v-else-if="this.$route.params.recibo==\'bajas\'">\n          <div class="col-xs-12 col-md-4" style="padding: 10px">\n            <q-select :label="$lang.ano" :options="filter.years" @input="callDataBajas" dense expandBesides optionsDense v-model="filter.year"/>\n          </div>\n          <div class="col-xs-12 col-md-4" style="padding: 10px">\n            <q-select :label="$lang.mes" :options="filter.months" @input="callDataBajas" dense expandBesides optionsDense v-model="filter.month"/>\n          </div>\n        </template>\n        \x3c!-- FILTER ONLY LIQ & CAJA --\x3e\n        <template v-else-if="this.$route.params.recibo==\'liq\'">\n          <div class="col-xs-12 col-md-4" style="padding: 10px">\n            <q-select :label="$lang.ano" :options="filter.years" @input="callDataLiq" dense expandBesides optionsDense v-model="filter.year"/>\n          </div>\n          <div class="col-xs-12 col-md-4" style="padding: 10px">\n            <q-select :label="$lang.semana" :options="filter.weeks" @input="callDataLiq" dense expandBesides optionsDense v-model="filter.week"/>\n          </div>\n        </template>\n      </div>\n      \x3c!-- MINI TOOLBAR--\x3e\n      <q-bar class="bg-primary text-white">\n        <q-btn @click="dialogModel=true" dense flat icon="add" v-if="!recibo.selected && !recibo.selectedSub">{{$lang.NuevoRecibo}}</q-btn>\n        <q-btn @click="dialogModel=true" dense flat icon="add" v-if="recibo.selected">{{$lang.NuevaGestion}}</q-btn>\n        <q-btn @click="dialogModel=true" dense flat icon="edit" v-if="recibo.selectedSub">{{$lang.EditarGestion}}</q-btn>\n        <q-btn @click="onDelete" color="warning" dense flat icon="delete" v-if="recibo.selected">{{$lang.EliminarRecibo}}</q-btn>\n        <q-btn @click="onDelete" color="warning" dense flat icon="delete" v-if="recibo.selectedSub">{{$lang.EliminarGestion}}</q-btn>\n        <q-space/>\n        \x3c!-- COLORS HELP --\x3e\n        <div>\n          <q-btn color="primary" icon="help_outline" size="sm">\n            <q-popup-proxy>\n              <q-list dense>\n                <q-item :key="key" :style="{\'background-color\': helpColors[key]}" v-for="(value, key) in $lang.ayuda">\n                  <q-item-section>\n                    <q-item-label>{{value}}</q-item-label>\n                  </q-item-section>\n                </q-item>\n              </q-list>\n            </q-popup-proxy>\n          </q-btn>\n        </div>\n      </q-bar>\n    </div>\n    \x3c!-- TABLA DE DATOS --\x3e\n    \x3c!-- <n-tables :columnDefs="columnDefs" :columnDefsSub="columnDefsSub" :filters="filters" :masterDetail="true" :quickFilter="quickFilter" :rowClassRules="rowClassRules" :rowData="rowData" @gridData="gridData" @rowSelected="rowSelected" @rowSelectedSub="rowSelectedSub"/> --\x3e\n    \x3c!-- DIALOGO --\x3e\n    \x3c!-- <n-dialog :data="dialogData" :fields="dialogFields" :model="dialogModel" @cancel="dialogModel=false" @onChange="onChange" @onSave="onSave"></n-dialog> --\x3e\n  </div>\n\n  ',components:{NTables:NTables},mixins:[mixins],data(){return{filters:null,filter:{userby:{value:"NombreTomador",label:this.$lang.userby[0].label},estadosSel:[{value:"PENDIENTE",label:this.$lang.estados[0].label},{value:"DEVUELTO",label:this.$lang.estados[1].label}],alldata:!1,years:[],weeks:[],months:[],month:parseInt(("0"+((new Date).getMonth()+1)).slice(-2)),year:(new Date).getFullYear(),week:1},rowClassRules:{error:"data.Estado.includes('COBRADO') && data.Gestion.includes('ANULADO')",pendiente:"data.Estado.includes('PENDIENTE') && data.Gestion.includes('PE')",anulado:"data.Estado.includes('ANULADO') || (data.Gestion.includes('AN') && !data.Estado.includes('COBRADO'))",cobrado:"data.Estado.includes('COBRADO') || (data.Gestion.includes('CO') && data.Importe == data.Cobrado)"},recibo:{selected:null,selectedSub:!1},myRoute:this.$route.params.recibo,calculos:{importe:null},helpColors:["","#fcf18e","#88c9ff","rgb(182, 255, 191)","rgb(252, 151, 151)","#a8a8a7"]}},methods:{onChange(value,key){"COME"==this.dialogData.Gestion||"COTR"==this.dialogData.Gestion?this.dialogFields.Importe.props.disable=!1:this.dialogFields.Importe.props.disable=!0},onSave(){console.log(this.dialogData),this.dialogModel=!1;let self=this;this.callData({cmd:this.cmd,idkey:this.idKey,idvalue:this.dialogData[this.idKey],data:this.dialogData,table:this.dialogTable}).then(()=>self.init())},onDelete(){let self=this;this.$q.dialog({message:this.$lang.EliminarRegistro,cancel:!0}).onOk(()=>{this.callData({cmd:"deleteRecord",idkey:this.idKey,idvalue:this.dialogData[this.idKey],table:this.table}).then(()=>self.init())}).onCancel(()=>{})},callDataGestion(){let self=this,dateini=new Date;dateini.setMonth(dateini.getMonth()-13),dateini=dateini.toISOString().substr(0,10);let dateend=(new Date).toISOString().substr(0,10),where="(",or="";for(let i=0;i<this.filter.estadosSel.length;i++)where+=or+"Estado LIKE '"+this.filter.estadosSel[i].value+"%'",or=" OR ";where+=")",this.filter.alldata||(where+=" AND (FechaEfecto BETWEEN '"+dateini+"' AND '"+dateend+"')"),where+=" ORDER BY Situacion DESC",this.callData({cmd:"getRecords",table:"Recibos",where:where,subtable:"RecibosGestion",id:this.filter.userby.value}).then(function(response){self.defineDialog(self.columnDefs),self.dialogTable="Recibos",self.dialogFields.Gestion.options=self.$lang.gestion,self.dialogFields.Gestion.type="select",self.dialogFields.Estado.options=self.$lang.estados,self.dialogFields.Estado.type="select"})},callDataBajas(){let self=this,where="(Gestion LIKE 'ANULADO') AND (FechaEfecto LIKE '"+this.filter.year+"-"+this.filter.month+"%')";this.callData({cmd:"getRecords",table:"Recibos",where:where}).then(function(response){})},callDataLiq(){let self=this,days=this.getDaysWeek(this.filter.year,this.filter.month),where="(Estado LIKE 'COBRADO') AND (Situacion>='"+days.dateini+"' AND Situacion<='"+days.dateend+"') ORDER BY Situacion DESC";this.callData({cmd:"getRecords",table:"Recibos",where:where}).then(function(response){})},callDataRecibo(){let self=this,where="(CodigoRecibo='"+this.$route.params.recibo+"')";this.callData({cmd:"getRecords",table:"Recibos",where:where}).then(function(response){})},rowSelected:function(data){data?(this.recibo.selected=!0,this.defineDialog(this.columnDefsSub,!1,"RecibosGestion"),this.dialogData.CodigoRecibo=data.CodigoRecibo,this.dialogData.CodigoPoliza=data.CodigoPoliza,this.dialogData.NombreTomador=data.NombreTomador,this.dialogData.Usuario=localStorage.username):(this.recibo.selected=!1,this.defineDialog(this.columnDefs,!1,"Recibos"),this.dialogFields.Estado.options=this.$lang.estados,this.dialogFields.Estado.type="select"),this.dialogFields.Gestion.options=this.$lang.gestion,this.dialogFields.Gestion.type="select"},rowSelectedSub:function(data){this.dialogTable="RecibosGestion",data?(this.defineDialog(this.columnDefsSub,data),this.recibo.selectedSub=!0,this.dialogFields.Gestion.options=this.$lang.gestion,this.dialogFields.Gestion.type="select"):this.recibo.selectedSub=!1},gridData(data){let sumCobrado=0,sumImporte=0;for(let i=0;i<data.length;i++)sumCobrado+=data[i].data.Cobrado,sumImporte+=data[i].data.Importe;this.calculos.importe="caja"==this.$route.params.recibo?Number(sumCobrado).toFixed(2):Number(sumImporte).toFixed(1)},init(){this.recibo.selected=null,this.recibo.selectedSub=!1,this.dialogModel=!1,this.filter.months=this.getMonths(),this.filter.weeks=this.getWeeks(),this.filter.years=this.getYears(),"bajas"==this.$route.params.recibo&&this.callDataBajas(),"gestion"==this.$route.params.recibo&&this.callDataGestion(),"liq"==this.$route.params.recibo&&this.callDataLiq(),""==this.$route.params.recibo&&this.callDataRecibo()}},beforeMount(){this.init()},watch:{$route:"init"}};export const Error404={name:"Error404",template:'<div>\n  <div id="notfound">\n    <div class="notfound">\n      <div class="notfound-404"></div>\n      <h1>404</h1>\n      <h2>Oops! Página inexistente</h2>\n      <p>Lo sentimos, la página solicitada no existe, fué eliminada, cambiada de nombre o está temporalmente\n        indisponible</p>\n      <a href="#">Volver a Inicio</a>\n    </div>\n  </div>\n</div>'};export const Clientes={name:"Clientes",template:'<div class="container">\n  <div class="row text-center">\n    <div class="col-xs-12" style="padding: 10px">\n      <q-input :label="$lang.FiltroRapido" dense type="text" v-model="quickFilter">\n        <q-icon name="filter_list" slot="prepend" />\n        <q-icon @click="quickFilter = \'\'" class="cursor-pointer" name="close" slot="append" />\n      </q-input>\n    </div>\n  </div>\n  <n-tables :columnDefs="columnDefs" :quickFilter="quickFilter" :rowClassRules="rowClassRules" :rowData="rowData" />\n</div>\n  ',components:{NTables:NTables},mixins:[mixins],data:()=>({rowClassRules:{}}),methods:{callDataClients(){let self=this;this.callData({cmd:"getRecords",table:"Clientes"}).then(function(response){self.defineTable(response)})}},beforeMount(){this.callDataClients()},watch:{}};