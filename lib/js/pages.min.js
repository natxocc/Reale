const Main={name:"Main",mixins:[mixins],template:'<div>\n  \x3c!-- MENU IZQUIERDA --\x3e\n  <v-navigation-drawer v-model="menu.left" fixed app disable-resize-watcher>\n    <template>\n      <v-card>\n        <v-card-actions>\n          <v-btn flat color="primary" to="/">Agencia Reale Valls</v-btn>\n        </v-card-actions>\n      </v-card>\n    </template>\n    <template>\n      <v-expansion-panel>\n        <v-expansion-panel-content v-for="(option,i) in menu.options" :key="i">\n          <div slot="header">\n            <v-icon>{{ option.icon }}</v-icon>\n            {{ option.name }}\n          </div>\n          <v-list>\n            <v-list-tile v-for="(sub,i) in option.subs" :to="sub.to" :key="i">\n              <v-list-tile-action></v-list-tile-action>\n              <v-list-tile-content>\n                <v-list-tile-title>{{ sub.name }}</v-list-tile-title>\n              </v-list-tile-content>\n            </v-list-tile>\n          </v-list>\n        </v-expansion-panel-content>\n      </v-expansion-panel>\n    </template>\n  </v-navigation-drawer>\n  \x3c!-- TOOLBAR --\x3e\n  <v-toolbar\n    color="primary"\n    dark\n    fixed\n    app\n    :scroll-threshold="200"\n    scroll-off-screen\n  >\n    <v-toolbar-side-icon\n      @click.stop="menu.left = !menu.left"\n      color="secondary"\n      flat\n    ></v-toolbar-side-icon>\n    <v-toolbar-title>CRC Reale Valls</v-toolbar-title>\n    <v-spacer></v-spacer>\n    \x3c!-- BOTON USUARIO --\x3e\n    <div v-if="user.logged">\n      <v-menu bottom origin="top right" transition="scale-transition">\n        <v-btn flat icon slot="activator" color="secondary">\n          <v-icon>person</v-icon>\n        </v-btn>\n        <v-layout align-baseline class="pa-2" style="background: white">\n          <v-flex text-xs-center>\n            <v-list>\n              <v-btn block @click="user.logged=false">Cerrar Sesion</v-btn>\n            </v-list>\n            <v-list>\n              <v-btn block @click="user.logged=false">Mis archivos</v-btn>\n            </v-list>\n          </v-flex>\n        </v-layout>\n      </v-menu>\n    </div>\n    <div v-else>\n      <v-btn flat icon @click="user.dialog=true" color="red">\n        <v-icon>person</v-icon>\n      </v-btn>\n    </div>\n  </v-toolbar>\n  \x3c!-- DIALOGO CONEXION USUARIO --\x3e\n  <v-dialog v-model="user.dialog" @keydown.esc="user.dialog=false">\n    <v-card>\n      <v-card-title class="headline secondary" primary-title\n        >Inicio de sesión</v-card-title\n      >\n      <v-card-text>\n        <v-form>\n          <v-text-field\n            v-model="user.name"\n            clearable\n            label="Usuario"\n            required\n          ></v-text-field>\n          <v-text-field\n            v-model="user.pass"\n            clearable\n            label="Contraseña"\n            required\n            type="password"\n          ></v-text-field>\n        </v-form>\n      </v-card-text>\n      <v-divider></v-divider>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn\n          color="primary"\n          flat\n          @click="user.dialog=false; user.logged=!user.logged"\n          >Aceptar</v-btn\n        >\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n  \x3c!-- CONTENIDO Y ROUTER --\x3e\n  <v-content>\n    <v-container fluid fill-height>\n      <v-layout justify-center align-center>\n        <v-flex text-xs-center>\n        <v-btn flat @click="getLang(\'ca\')">ca</v-btn>\n        <v-btn flat @click="getLang(\'es\')">es</v-btn>\n          <router-view></router-view>\n        </v-flex>\n      </v-layout>\n    </v-container>\n  </v-content>\n  \x3c!-- DATEPICKER --\x3e\n    <v-flex xs12 sm6 class="my-3">\n      <v-date-picker\n        v-model="picker"\n        :first-day-of-week="0"\n        :locale="setLang"\n      ></v-date-picker>\n    </v-flex>\n  \x3c!-- BOTON VOLVER A INICIO --\x3e\n  <v-fab-transition>\n    <v-btn\n      v-scroll="onScroll"\n      v-show="gotop"\n      :style="{bottom: $vuetify.breakpoint.smOnly ? \'64px\' : \'\' }"\n      fab\n      dark\n      fixed\n      bottom\n      right\n      color="red"\n      @click="toTop"\n    >\n      <v-icon>keyboard_arrow_up</v-icon>\n    </v-btn>\n  </v-fab-transition>\n  \x3c!-- PIE DE PAGINA --\x3e\n  <v-footer app color="primary" dark>\n    <span class="white--text"\n      >&copy; Ntx Software v0.1 {{ menu.leftList }}</span\n    >\n  </v-footer>\n</div>\n',data:()=>({tt:null,picker:(new Date).toISOString().substr(0,10),gotop:!1,menu:{left:!1,right:!1,leftList:null},user:{user:null,pass:null,name:null,mail:null,passShow:!1,dialog:!1}}),methods:{onScroll(){const top=window.pageYOffset||document.documentElement.offsetTop||0;this.gotop=top>200},toTop(){this.$router.push({hash:""}),this.$vuetify.goTo(0)},login(){let self=this;this.callData({cmd:"login",user:self.user.user,pass:self.user.pass}).then(function(response){response.success?(localStorage.sid=response.sid,localStorage.mail=response.info.data.email,localStorage.username=response.info.data.fullname):self.logout()}).catch(function(response){}),this.user.dialog=!1},logout(){let self=this;this.callData({cmd:"logout"}),localStorage.removeItem("sid"),localStorage.removeItem("mail"),localStorage.removeItem("username"),this.user.name=localStorage.username,this.user.mail=localStorage.mail,this.menu.left=!1,this.menu.right=!1},checkUser(){let self=this;this.callData({cmd:"checkUser"}).then(function(response){response.success?(self.user.name=localStorage.username,self.user.mail=localStorage.mail):self.logout()})},menuUser(){localStorage.sid?this.menu.right=!this.menu.right:this.user.dialog=!0},sendBug(){window.open("https://github.com/natxocc/CRC/issues","_system")}},beforeMount(){this.getLang(localStorage.lang),this.menu.leftList=[{icon:"euro_symbol",name:this.lang.menu.Recibos,to:"/recibos/gestion"},{icon:"timeline",name:this.lang.menu.Polizas,to:"/polizas/altas"},{icon:"contacts",name:this.lang.menu.Clientes,to:"/clientes"},{icon:"healing",name:this.lang.menu.Siniestros,to:"/recibos"},{icon:"person",name:this.lang.menu.Usuarios,to:"/usuarios"},{icon:"person",name:this.lang.menu.Registros,to:"/registros"}],localStorage.sid&&this.checkUser(),localStorage.url="http://servidor/lib/php/post.php"},created(){}},Home={name:"home",template:"<div>\n  <button></button>\n</div>"},Recibos={name:"Recibos",template:'\n  <div class="container">\n    \x3c!-- TABS --\x3e\n <q-tabs active-bg-color="primary" active-color="white" class="bg-secondary text-primary" dense indicator-color="transparent" inline-label top-indicator v-model="myRoute">\n      <q-route-tab :label="$lang.Gestion" icon="assignment_turned_in" name="gestion" to="/recibos/gestion"/>\n      <q-route-tab :label="$lang.BajasPendientes" icon="assignment_returned" name="bajas" to="/recibos/bajas"/>\n      <q-route-tab :label="$lang.Liquidacion" icon="credit_card" name="liq" to="/recibos/liq"/>\n      <q-tab :label="calculos.importe" class="text-primary" disabled icon="euro_symbol"/>\n    </q-tabs>\n    \x3c!-- SELECT FILTERS TOTALS--\x3e\n    <div>\n      <div class="row text-center">\n        <div class="col-xs-12 col-md-4" style="padding: 10px">\n          <q-input :label="$lang.FiltroRapido" dense type="text" v-model="quickFilter">\n            <q-icon name="filter_list" slot="prepend"/>\n            <q-icon @click="quickFilter = \'\'" class="cursor-pointer" name="close" slot="append"/>\n          </q-input>\n        </div>\n        \x3c!-- FILTER ONLY GESTION --\x3e\n        <template v-if="this.$route.params.recibo==\'gestion\'">\n          <div class="col-xs-12 col-md-4" style="padding: 10px">\n            <q-select :label="$lang.FiltrosDeEstado" :options="this.$lang.estados" @input="callDataGestion" dense expandBesides multiple optionsDense v-model="filter.estadosSel"/>\n          </div>\n          <div class="col-xs-6 col-md-2" style="padding: 10px">\n            <q-select :label="$lang.HistorialUsuario" :options="this.$lang.userby" @input="callDataGestion" dense expandBesides optionsDense v-model="filter.userby"/>\n          </div>\n          <div class="col-xs-6 col-md-2" style="padding: 10px">\n            <q-toggle :label="$lang.TodosLosRegistros" @input="callDataGestion" dense v-model="filter.alldata">\n              <q-tooltip anchor="top middle" self="bottom middle">{{$lang.TodosLosRegistrosT}}</q-tooltip>\n            </q-toggle>\n          </div>\n        </template>\n        \x3c!-- FILTER ONLY BAJAS --\x3e\n        <template v-else-if="this.$route.params.recibo==\'bajas\'">\n          <div class="col-xs-12 col-md-4" style="padding: 10px">\n            <q-select :label="$lang.ano" :options="filter.years" @input="callDataBajas" dense expandBesides optionsDense v-model="filter.year"/>\n          </div>\n          <div class="col-xs-12 col-md-4" style="padding: 10px">\n            <q-select :label="$lang.mes" :options="filter.months" @input="callDataBajas" dense expandBesides optionsDense v-model="filter.month"/>\n          </div>\n        </template>\n        \x3c!-- FILTER ONLY LIQ & CAJA --\x3e\n        <template v-else-if="this.$route.params.recibo==\'liq\'">\n          <div class="col-xs-12 col-md-4" style="padding: 10px">\n            <q-select :label="$lang.ano" :options="filter.years" @input="callDataLiq" dense expandBesides optionsDense v-model="filter.year"/>\n          </div>\n          <div class="col-xs-12 col-md-4" style="padding: 10px">\n            <q-select :label="$lang.semana" :options="filter.weeks" @input="callDataLiq" dense expandBesides optionsDense v-model="filter.week"/>\n          </div>\n        </template>\n      </div>\n      \x3c!-- MINI TOOLBAR--\x3e\n      <q-bar class="bg-primary text-white">\n        <q-btn @click="dialogModel=true" dense flat icon="add" v-if="!recibo.selected && !recibo.selectedSub">{{$lang.NuevoRecibo}}</q-btn>\n        <q-btn @click="dialogModel=true" dense flat icon="add" v-if="recibo.selected">{{$lang.NuevaGestion}}</q-btn>\n        <q-btn @click="dialogModel=true" dense flat icon="edit" v-if="recibo.selectedSub">{{$lang.EditarGestion}}</q-btn>\n        <q-btn @click="onDelete" color="warning" dense flat icon="delete" v-if="recibo.selected">{{$lang.EliminarRecibo}}</q-btn>\n        <q-btn @click="onDelete" color="warning" dense flat icon="delete" v-if="recibo.selectedSub">{{$lang.EliminarGestion}}</q-btn>\n        <q-space/>\n        \x3c!-- COLORS HELP --\x3e\n        <div>\n          <q-btn color="primary" icon="help_outline" size="sm">\n            <q-popup-proxy>\n              <q-list dense>\n                <q-item :key="key" :style="{\'background-color\': helpColors[key]}" v-for="(value, key) in $lang.ayuda">\n                  <q-item-section>\n                    <q-item-label>{{value}}</q-item-label>\n                  </q-item-section>\n                </q-item>\n              </q-list>\n            </q-popup-proxy>\n          </q-btn>\n        </div>\n      </q-bar>\n    </div>\n    \x3c!-- TABLA DE DATOS --\x3e\n    \x3c!-- <n-tables :columnDefs="columnDefs" :columnDefsSub="columnDefsSub" :filters="filters" :masterDetail="true" :quickFilter="quickFilter" :rowClassRules="rowClassRules" :rowData="rowData" @gridData="gridData" @rowSelected="rowSelected" @rowSelectedSub="rowSelectedSub"/> --\x3e\n    \x3c!-- DIALOGO --\x3e\n    \x3c!-- <n-dialog :data="dialogData" :fields="dialogFields" :model="dialogModel" @cancel="dialogModel=false" @onChange="onChange" @onSave="onSave"></n-dialog> --\x3e\n  </div>\n\n  ',components:{NTables:NTables},mixins:[mixins],data(){return{filters:null,filter:{userby:{value:"NombreTomador",label:this.$lang.userby[0].label},estadosSel:[{value:"PENDIENTE",label:this.$lang.estados[0].label},{value:"DEVUELTO",label:this.$lang.estados[1].label}],alldata:!1,years:[],weeks:[],months:[],month:parseInt(("0"+((new Date).getMonth()+1)).slice(-2)),year:(new Date).getFullYear(),week:1},rowClassRules:{error:"data.Estado.includes('COBRADO') && data.Gestion.includes('ANULADO')",pendiente:"data.Estado.includes('PENDIENTE') && data.Gestion.includes('PE')",anulado:"data.Estado.includes('ANULADO') || (data.Gestion.includes('AN') && !data.Estado.includes('COBRADO'))",cobrado:"data.Estado.includes('COBRADO') || (data.Gestion.includes('CO') && data.Importe == data.Cobrado)"},recibo:{selected:null,selectedSub:!1},myRoute:this.$route.params.recibo,calculos:{importe:null},helpColors:["","#fcf18e","#88c9ff","rgb(182, 255, 191)","rgb(252, 151, 151)","#a8a8a7"]}},methods:{onChange(value,key){"COME"==this.dialogData.Gestion||"COTR"==this.dialogData.Gestion?this.dialogFields.Importe.props.disable=!1:this.dialogFields.Importe.props.disable=!0},onSave(){console.log(this.dialogData),this.dialogModel=!1;let self=this;this.callData({cmd:this.cmd,idkey:this.idKey,idvalue:this.dialogData[this.idKey],data:this.dialogData,table:this.dialogTable}).then(()=>self.init())},onDelete(){let self=this;this.$q.dialog({message:this.$lang.EliminarRegistro,cancel:!0}).onOk(()=>{this.callData({cmd:"deleteRecord",idkey:this.idKey,idvalue:this.dialogData[this.idKey],table:this.table}).then(()=>self.init())}).onCancel(()=>{})},callDataGestion(){let self=this,dateini=new Date;dateini.setMonth(dateini.getMonth()-13),dateini=dateini.toISOString().substr(0,10);let dateend=(new Date).toISOString().substr(0,10),where="(",or="";for(let i=0;i<this.filter.estadosSel.length;i++)where+=or+"Estado LIKE '"+this.filter.estadosSel[i].value+"%'",or=" OR ";where+=")",this.filter.alldata||(where+=" AND (FechaEfecto BETWEEN '"+dateini+"' AND '"+dateend+"')"),where+=" ORDER BY Situacion DESC",this.callData({cmd:"getRecords",table:"Recibos",where:where,subtable:"RecibosGestion",id:this.filter.userby.value}).then(function(response){self.defineDialog(self.columnDefs),self.dialogTable="Recibos",self.dialogFields.Gestion.options=self.$lang.gestion,self.dialogFields.Gestion.type="select",self.dialogFields.Estado.options=self.$lang.estados,self.dialogFields.Estado.type="select"})},callDataBajas(){let self=this,where="(Gestion LIKE 'ANULADO') AND (FechaEfecto LIKE '"+this.filter.year+"-"+this.filter.month+"%')";this.callData({cmd:"getRecords",table:"Recibos",where:where}).then(function(response){})},callDataLiq(){let self=this,days=this.getDaysWeek(this.filter.year,this.filter.month),where="(Estado LIKE 'COBRADO') AND (Situacion>='"+days.dateini+"' AND Situacion<='"+days.dateend+"') ORDER BY Situacion DESC";this.callData({cmd:"getRecords",table:"Recibos",where:where}).then(function(response){})},callDataRecibo(){let self=this,where="(CodigoRecibo='"+this.$route.params.recibo+"')";this.callData({cmd:"getRecords",table:"Recibos",where:where}).then(function(response){})},rowSelected:function(data){data?(this.recibo.selected=!0,this.defineDialog(this.columnDefsSub,!1,"RecibosGestion"),this.dialogData.CodigoRecibo=data.CodigoRecibo,this.dialogData.CodigoPoliza=data.CodigoPoliza,this.dialogData.NombreTomador=data.NombreTomador,this.dialogData.Usuario=localStorage.username):(this.recibo.selected=!1,this.defineDialog(this.columnDefs,!1,"Recibos"),this.dialogFields.Estado.options=this.$lang.estados,this.dialogFields.Estado.type="select"),this.dialogFields.Gestion.options=this.$lang.gestion,this.dialogFields.Gestion.type="select"},rowSelectedSub:function(data){this.dialogTable="RecibosGestion",data?(this.defineDialog(this.columnDefsSub,data),this.recibo.selectedSub=!0,this.dialogFields.Gestion.options=this.$lang.gestion,this.dialogFields.Gestion.type="select"):this.recibo.selectedSub=!1},gridData(data){let sumCobrado=0,sumImporte=0;for(let i=0;i<data.length;i++)sumCobrado+=data[i].data.Cobrado,sumImporte+=data[i].data.Importe;this.calculos.importe="caja"==this.$route.params.recibo?Number(sumCobrado).toFixed(2):Number(sumImporte).toFixed(1)},init(){this.recibo.selected=null,this.recibo.selectedSub=!1,this.dialogModel=!1,this.filter.months=this.getMonths(),this.filter.weeks=this.getWeeks(),this.filter.years=this.getYears(),"bajas"==this.$route.params.recibo&&this.callDataBajas(),"gestion"==this.$route.params.recibo&&this.callDataGestion(),"liq"==this.$route.params.recibo&&this.callDataLiq(),""==this.$route.params.recibo&&this.callDataRecibo()}},beforeMount(){this.init()},watch:{$route:"init"}},Error404={name:"Error404",template:'<div>\n  <div id="notfound">\n    <div class="notfound">\n      <div class="notfound-404"></div>\n      <h1>404</h1>\n      <h2>Oops! Página inexistente</h2>\n      <p>Lo sentimos, la página solicitada no existe, fué eliminada, cambiada de nombre o está temporalmente\n        indisponible</p>\n      <a href="#">Volver a Inicio</a>\n    </div>\n  </div>\n</div>'},Clientes={name:"Clientes",template:'<div class="container">\n  <div class="row text-center">\n    <div class="col-xs-12" style="padding: 10px">\n      <q-input :label="$lang.FiltroRapido" dense type="text" v-model="quickFilter">\n        <q-icon name="filter_list" slot="prepend" />\n        <q-icon @click="quickFilter = \'\'" class="cursor-pointer" name="close" slot="append" />\n      </q-input>\n    </div>\n  </div>\n  <n-tables :columnDefs="columnDefs" :quickFilter="quickFilter" :rowClassRules="rowClassRules" :rowData="rowData" />\n</div>\n  ',components:{NTables:NTables},mixins:[mixins],data:()=>({rowClassRules:{}}),methods:{callDataClients(){let self=this;this.callData({cmd:"getRecords",table:"Clientes"}).then(function(response){self.defineTable(response)})}},beforeMount(){this.callDataClients()},watch:{}};